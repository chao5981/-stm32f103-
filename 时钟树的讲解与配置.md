这个是stm32f10x的时钟示意图（简称时钟树）
![时钟树](https://github.com/user-attachments/assets/e3476a38-45db-495d-8bcb-96e210516421)
我们线解释一下时钟树里面的关键词语
1.MCO:一个GPIO接口，我们可以通过它连接示波器，就可以非常清晰的查看时钟频率的变化。但是由于我缺乏这种设备，所以我用LED灯的闪烁情况去代替了。
2.HSE,HSI,LSE,LSI:就是时钟，用于发出时钟信号，也就是发出频率。
3.RTC:一种能独立运行，在系统断电后仍可依靠备用电源（如纽扣电池）维持计时的时钟电路
4.RTCCLK:配置RTC的时钟
5.PLLSRC:PLL时钟源选择，正如你所见PLLSRC俩条线，如果在俩个时钟都打开的话，那就需要配置PLLSRC让其在二者中选一个（但一般 情况下不会俩个时钟都打开），如果只打开一个则无需管。
6.PLLMUL：频率放大器，可以选定一定的倍速进行放大。
7.PLL：PLLSRC和PLLMUL的总称
8.SW：switch的缩写，系统时钟（SYSCLK）在PLLCLK,HSI,HSE三者选一个作为系统时钟
9.CSS：时钟安全系统，检测 HSE（外部高频时钟）是否发生故障，并在故障时 自动切换到 HSI 以保证系统时钟的稳定性。
10.AHB、APB1、APB2,ADC:不同的总线时钟，它们分别对应不同的外设和模块的时钟来源，对应的模块就不展开讲解。
其他的我们暂时不会了解，用到时再进行讲解。
我们以配置HSI为例子，讲解如何达到改变GPIO口的输出频率
第一步：明确我们要改变哪个总线时钟的频率，查阅GPIO所连接的时钟，确定我们最终要配置的总线时钟为APB2(PCLK2)
第二步：将时钟全部初始化，防止之前实验对时钟的配置会影响我们这一节的实验。(请放心，不会影响到下一节实验的频率，因为你的模板每次初始化为72HZ了)
![image](https://github.com/user-attachments/assets/75a02d08-053d-48cc-aeb9-8f3bf79a0faf)
第三步：直接使能HSI(提前使能不会导致崩溃，因为你PLL没开，SYSCLK没选择，不会影响)
![image](https://github.com/user-attachments/assets/574ae239-ce37-4a8a-970c-c63529160162)
第四步：检查HSI是否正确使能，如果不是直接跳出后面的配置，防止影响实验
![image](https://github.com/user-attachments/assets/bd59b1b7-b4d1-4936-b412-38dca66e5803)
这里可以给大家扩展一下，HSI用的是RCC_GetFlagStatus()进行检验，而HSE用的是固件库专门的函数检验
![image](https://github.com/user-attachments/assets/f72863b7-7a58-4134-9056-ce5e2579a788)
为什么呢？因为HSI是内部时钟源，在芯片上电时就默认开启，且启动非常快速，而HSEHSE 是一个 外部时钟源，通常是由外部的 晶体振荡器（晶振） 或外部时钟提供的。
启动时间长：由于 HSE 的启动过程涉及外部组件，如晶振启动、外部电路稳定等，启动过程较长，可能需要几十毫秒。为了大家的使用方便，官方直接给了一个函数供给大家使用。
第五步：在第四步成功运行的情况下，我们先对总线时钟进行预分频，防止一打开过后有短时间的频率未分频
1.将AHB预分频调成1
![image](https://github.com/user-attachments/assets/a0f22870-b8a7-46d9-b095-0f06e3bfa290)
2.将将APB1预分频调为1
![image](https://github.com/user-attachments/assets/dc71dcdb-b21e-4111-90ca-d3eb23b1f6f4)
3.配置PLL，这里的一个函数能同时配置PLLSRC和PLLMUL。第一个参数选择HSI，第二个写放大倍数
![image](https://github.com/user-attachments/assets/bcf4699a-c190-4d6f-9402-7401fc698a4f)
4.其他的总线时钟没有配置的话会系统会默认配置，保证不会超出最大赫兹防止损坏元器件。
第六步：配置完毕，使能PLL
![image](https://github.com/user-attachments/assets/431b8931-4b26-4930-b92b-2badb8626ecb)
第七步：用while循环等待PLL使能稳定后，选择(SW)系统时钟的来源，选择PLLCLK
![image](https://github.com/user-attachments/assets/7b29971b-38ea-4df3-bb34-d4505a2d12fd)
这里给大家扩展一下，理论上可以直接选择HSI或者HSE，但是这俩个如果不经过PLL放大的话，他俩的频率最大才8HZ，使用我们这次改变APB2时钟总线的话需要经过PLL放大
第八步：读取时钟位，确保PLLCLK被设定为系统时钟
![image](https://github.com/user-attachments/assets/34141eec-af27-4ab9-a8b8-74a8bf568775)
结束配置，恭喜你完成配置，如果使能HSE，步骤也是类似的。如果有讲解不正确的地方，欢迎大家指正


