  1.让我们先打开原理图，查看GCB灯连接的引脚
  ![image](https://github.com/user-attachments/assets/ec04224a-4dcd-4008-8dff-c53d7ee674b9)
  
  
  2.先配置时钟
  由于GPIO被APB2时钟控制，我们找到对应的启动APB2时钟的库函数

  3. 配置GPIO结构体并初始化结构体

  主要讲GPIO的几种模式:
  1. 输入模式 (Input mode)
  输入模式用于读取引脚的外部电平状态。

  GPIO_MODE_INPUT (输入)
  
  单凭这个还不够，HAL库还会选择引脚的PULL模式以配合输入模式

  GPIO_NOPULL:既不上拉，又不下拉(输入浮空)
  
  描述： 引脚完全作为输入，内部既不上拉也不下拉。引脚的电平完全由外部电路决定。如果外部处于高阻态（比如什么都没接），引脚的电平会是浮空的（不确定），容易受到外界电磁干扰。

  应用场景： 外部电路已经包含上拉或下拉电阻的情况，例如通过I2C总线等。
  
  GPIO_PULLDOWN：下拉(输入下拉)
  
  描述： 引脚作为输入，但内部通过一个电阻连接到VDD（电源）。当外部没有信号输入时，引脚的电平会被内部电阻拉至高电平（1）。

  应用场景： 最常用于连接机械按键。按键一端接地，另一端接GPIO引脚。当按键未按下时，引脚被拉高；按下时，引脚被拉低
  
  GPIO_PULLUP：上拉(输入上拉)

  描述： 引脚作为输入，但内部通过一个电阻连接到VSS（地）。当外部没有信号输入时，引脚的电平会被内部电阻拉至低电平（0）。

  应用场景： 与上拉模式类似，取决于外部电路的默认状态需求。例如，希望按键未按下时默认为低电平。

  2. 输出模式 (Output mode)
  输出模式用于驱动外部器件，如点亮LED、控制继电器等。
  
  GPIO_MODE_OUTPUT_PP (推挽输出)
  
  描述： 这是最常用的输出模式。MCU可以直接输出高电平（接近VDD）或低电平（接近0V）。它使用一对PMOS和NMOS管（类似三极管）构成推挽结构，驱动能力强，“推”出去电流和“拉”进来电流（灌电流）的能力都很好。
  
  特点： 输出高电平和低电平时都具有低阻抗。
  
  应用场景： 驱动大多数数字器件，如LED、蜂鸣器等。

  在此模式下，配置 Pull 同样有效。它会在输出电路的基础上，并联一个上拉或下拉电阻。这在某些特定场合下有用，但绝大多数情况下，推挽输出模式本身已经具有很强的驱动能力，不需要再额外使能上拉/下拉。通常我们会将其设置为 GPIO_NOPULL。
  
  GPIO_MODE_OUTPUT_OD (开漏输出)
  
  描述： 开漏输出只能输出低电平（0V）或者高阻态。它内部只有“下拉”的NMOS管，没有“上拉”的PMOS管。要输出高电平，必须依赖外部上拉电阻连接到电源。
  
  特点：
  
  电平转换： 方便实现不同电压域的设备通信。例如，STM32是3.3V，外部设备是5V，只要外接一个上拉电阻到5V，开漏输出就可以实现5V电平的通信。
  
  线与功能： 多个开漏输出的引脚可以直接连接在一起，实现“线与”逻辑（任何一方输出低电平，总线就是低电平）。
  
  应用场景： I2C、SMBus等通信总线，以及需要“线与”或电平转换的场合。

  在此模式下，开漏输出配置的PULL只有可能是GPIO_NOPULL(即不上拉又不下拉，完全由外部电路确定)或者GPIO_PULLUP(上拉，输出MOS管关闭。内部上拉电阻将引脚电平拉高至VDD)
   
  3. 复用功能模式 (Alternate Function mode)
  当GPIO引脚用于连接STM32内部的其他外设（如UART， SPI， I2C， TIM等）时，就需要配置为复用模式。它也有推挽和开漏两种子类型。
  
  GPIO_MODE_AF_PP (复用推挽输出)
  
  描述： 引脚的输出信号由STM32内部的外设（如USART的TX）控制，输出结构是推挽的。
  
  应用场景： 大多数外设的输出引脚，如SPI的MOSI、SCK，USART的TX等。

  在此模式下，配置 Pull 同样有效。它会在输出电路的基础上，并联一个上拉或下拉电阻。这在某些特定场合下有用，但绝大多数情况下，推挽输出模式本身已经具有很强的驱动能力，不需要再额外使能上拉/下拉。通常我们会将其设置为 GPIO_NOPULL。
  
  GPIO_MODE_AF_OD (复用开漏输出)
  
  描述： 引脚的输出信号由STM32内部的外设控制，但输出结构是开漏的。
  
  应用场景： 主要用于I2C的SDA和SCL引脚，因为它们需要开漏特性来实现“线与”和电平兼容。

  一般情况下都会采用GPIO_NOPULL(即不上拉又不下拉，完全由外部电路确定)
  
  4. 模拟模式 (Analog mode)
  GPIO_MODE_ANALOG (模拟输入/输出)
  
  描述： 引脚的所有数字功能（包括施密特触发器）都被禁用。引脚直接连接到内部的模拟外设，信号以模拟形式传输，没有数字意义上的0和1。
  
  应用场景： 用于ADC（模数转换器）采集外部模拟电压，或者DAC（数模转换器）输出模拟电压。
      
    
在配置为输出模式或复用模式时，还需要设置输出速度 GPIO_Speed。这决定了IO口翻转时的响应速度，本质上是控制内部驱动管的斜率（slew rate）。

低速 (Low/2MHz)： 功耗低，EMI（电磁干扰）小。适用于低频率信号，如GPIO控制、USART等。

中速 (Medium/10MHz-25MHz)： 平衡了速度和EMI。

高速 (High/50MHz-100MHz)： 响应最快，但功耗和EMI也最大。适用于高频信号，如SPI、SDIO、PWM等。

原则： 在满足性能要求的前提下，尽量选择低的速度配置，以降低噪声和功耗。

