  从51单片机学习完毕后，准备入门stm32f103，看到参考手册一堆寄存器和外设，会直接晕掉。
  现在，我经过了一段时间的沉淀，将我认为重要的沉淀下来，分享给大家。
  我们刚刚入门的是GPIO，那我就先从GPIO开始讲起。
  GPIO连接着各种各样的硬件，我们打开stm32f013的原理图，其中硬件连接的引脚是PXX纸样的，就是通过GPIO的引脚进行连接的。
  那么，GPIO和寄存器和时钟的关系是什么？我们要如何利用HAL来配置GPIO各个引脚的状态从而控制硬件呢？下面我依次为大家讲解。


  
  1.GPIO和寄存器和时钟的关系
  观察原理图，我们不难发现，有PA0,PB1...之类的，既然上文说谈到了PXX类型的是GPIO的引脚，那中间的A,B,C这些字母代表的什么呢？
  这是GPIO的不同的类型，GPIO一共有6种类型，是GPIOx(A,B,....F),看似编号不同，他们的功能都是相同的，也就是编号不同而已。你可以理解为一个年级的学生上课，要是都堆到一起上课，
学生的特点不同，那么上课的效率一定不高吧，于是学校就把他们不同的班，这样一是提高教学效率，而是方便管理。GPIO这样做小分类也是同理，方便我们开发者操作。


  讲完了GPIO的分类，让我们来听听时钟和GPIO的关系。
  我们看图说话：
  
  ![image](https://github.com/user-attachments/assets/f1cfa09e-da14-4281-abe6-3000d7c69e8a)


  这是STM32F10xx的系统框图，我们只需看这一部分，其余可以暂时不管。
  在图中我们不难发现有一个RCC和AHB总线，你可以暂时理解为这俩个就是等价的，根据箭头指向我们可以知道，要想配置GPIO，那就必须先配置时钟，并且必须配置的是APB2类型。但是要注意，这一张图没有体现出来的是，每个GPIO端口（如GPIOA、GPIOB等）都有一个独立的时钟，需要通过RCC来使能。

  好的，稍微整下队，也就是说，我们要配置GPIO的话，就需要到RCC的HAL中寻找到配置APB时钟的库函数，调用它并进行初始化，这个库函数如图所示：

  ![image](https://github.com/user-attachments/assets/f02dfb7c-4861-4cc0-809a-89323c9820f5)


  在先讲GPIO和寄存器的关系之前，我分别以通俗的语言给你介绍一下他们的功能
  1. GPIOx_CRL 和 GPIOx_CRH（端口配置寄存器）
  功能：配置GPIO引脚的工作模式和速度。

  通俗解释：就像设置一个开关的工作方式。你可以设置它是输入（接收信号）还是输出（发送信号），以及它的反应速度（快慢）。

  2. GPIOx_IDR（输入数据寄存器）
  功能：读取GPIO引脚的电平状态（高电平或低电平）。

  通俗解释：就像读取一个开关的当前状态，看看它是开着的还是关着的。

  3. GPIOx_ODR（输出数据寄存器）
  功能：设置GPIO引脚的输出电平（高电平或低电平）。
  
  通俗解释：就像手动控制一个开关，把它打开或关闭。
  
  4. GPIOx_BSRR（端口置位/复位寄存器）
  功能：快速设置或清除GPIO引脚的输出电平。
  
  通俗解释：就像一键开关，按一下就能立刻打开或关闭某个开关。
  
  5. GPIOx_BRR（端口复位寄存器）
  功能：快速清除GPIO引脚的输出电平（设置为低电平）。
  
  通俗解释：就像一键关闭某个开关。
  
  6. GPIOx_LCKR（端口配置锁定寄存器）
  功能：锁定GPIO引脚的配置，防止意外修改。
  
  通俗解释：就像给开关加个锁，防止别人乱动。
  
  总结
  配置寄存器（CRL/CRH）：设置引脚的工作方式和速度。
  
  输入数据寄存器（IDR）：读取引脚的状态。
  
  输出数据寄存器（ODR）：设置引脚的输出状态。
  
  置位/复位寄存器（BSRR）：快速设置或清除引脚状态。
  
  复位寄存器（BRR）：快速清除引脚状态。
  
  锁定寄存器（LCKR）：锁定引脚的配置。


  那么，GPIO和寄存器的关系是什么呢，观察细节的朋友就能发现，寄存器前面都有一个GPIOx_,所以答案就是，一个GPIO的类型就包含上面的所有寄存器！你肯定会认为不可思议，这不是会浪费很多位数吗，占用了太多的内存了！但是呢，其实这样做占用芯片的内存也就是4KB，相对于64MB已经是绰绰有余了。并且，这样你调用GPIO去控制不同的硬件的时候不会发生冲突，这是最值得称赞的，只要你学过51单片机，做过了WIFI模块和DS18B20的实验，你就知道引脚冲突的痛苦了（这tm整整调了1个下午我才发现的问题）。


  好！让我们再次整队，每一个GPIO类型都被独立的APB2时钟连接着，然后每一个GPIO类型都包含着CRH,CRL,IDR,ODR,BSRR,BRR,LCKR寄存器。


  如何利用HAL来配置GPIO各个引脚的状态从而控制硬件呢，这个答案就自然地出来了，就是我们可以把原理图扔给AI，让他告诉我们需要对那些寄存器进行操作，然后去看stm32f103的原理图，找到对应的GPIO口，然后去“STM32F10x Standard Peripherals Firmware Library”文件翻阅HAL的函数，适当结合一下stm32f103的开发手册，进行相应的配置就好啦。

 
